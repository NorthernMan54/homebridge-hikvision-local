# Homebridge Hikvision Local plugin

Homebridge plugin that connects to your HikVision DVR via a local connection and exposes your cameras in Homebridge. The plugin is heavily based on excellent [homebridge-camera-ffmpeg](https://github.com/Sunoo/homebridge-camera-ffmpeg) and the various homebridge-hikvision plugins out there.

This plugin will automatically discover all cameras connected to your DVR and will expose them to homebridge. You will get access to stream video (including sound) directly from your home app, will get push notification with screenshots of the motion events - this needs to be configured in HikVision DVR and additionally in Home app under home settings - you will need to enable notifications.

## Hikvsion DVR/NVR Tested with this version of the plugin

* ERI-K104-P4, which is included within the EKI-K41T44C kit

As I only have access to this device, this is the only one I can confirm as working.

## Configuration

### Video / Live view streaming

For video streaming / live view to work stream encryption must be disabled on your DVR, so please be aware of this.

The setting to disable stream encryption is only available via the local console ( hdmi / mouse ).  And is under the menu Network->Advanced Settings->Platform Status.

### Enable notifications in HikVision DVR

The plugin does not detect motion itself, it responds to events generated by the DVR using HTTP Event API.

You must set up notifications in the DVR configuration as per below screenshot:

![image](https://user-images.githubusercontent.com/47468/103291461-af287480-49e3-11eb-9db9-18708b35b3c3.png)

You might also find this YouTube video useful:

https://www.youtube.com/watch?v=-R_dtE9o9WI

[![Setup Notifications](https://img.youtube.com/vi/-R_dtE9o9WI/0.jpg)](https://www.youtube.com/watch?v=-R_dtE9o9WI)

